Ä+
ãC:\Users\sawad\Downloads\repositorios_gitlab_dicrep\api_remates_fase1\DICREP.EcommerceSubastas.Infrastructure\Services\JwtTokenGenerator.cs
	namespace 	
DICREP
 
. 
EcommerceSubastas "
." #
Infrastructure# 1
.1 2
Services2 :
{ 
public 

class 
JwtTokenGenerator "
:# $
IJwtTokenGenerator% 7
{ 
private 
readonly 
JwtSettings $
_jwtSettings% 1
;1 2
public 
JwtTokenGenerator  
(  !
JwtSettings! ,
jwtSettings- 8
)8 9
{ 	
_jwtSettings 
= 
jwtSettings &
;& '
} 	
public 
JwtTokenResult 
GenerateToken +
(+ ,
Empleado, 4
empleado5 =
)= >
{ 	
var 
claims 
= 
new 
List !
<! "
Claim" '
>' (
{ 
new 
Claim 
( #
JwtRegisteredClaimNames 1
.1 2
Sub2 5
,5 6
empleado7 ?
.? @

EmpUsuario@ J
)J K
,K L
new 
Claim 
( 
$str $
,$ %
empleado& .
.. /
PerfilId/ 7
.7 8
ToString8 @
(@ A
)A B
)B C
,C D
new 
Claim 
( 
$str &
,& '
empleado( 0
.0 1

SucursalId1 ;
.; <
ToString< D
(D E
)E F
)F G
,G H
new 
Claim 
( 
$str "
," #
$"$ &
{& '
empleado' /
./ 0
	EmpNombre0 9
}9 :
$str: ;
{; <
empleado< D
.D E
EmpApellidoE P
}P Q
"Q R
)R S
} 
; 
if"" 
("" 
empleado"" 
."" 
PerfilId"" !
==""" $
$num""% &
)""& '
{## 
claims$$ 
.$$ 
Add$$ 
($$ 
new$$ 
Claim$$ $
($$$ %

ClaimTypes$$% /
.$$/ 0
Role$$0 4
,$$4 5
$str$$6 B
)$$B C
)$$C D
;$$D E
claims%% 
.%% 
Add%% 
(%% 
new%% 
Claim%% $
(%%$ %
$str%%% 1
,%%1 2
empleado%%3 ;
.%%; <
EmpId%%< A
.%%A B
ToString%%B J
(%%J K
)%%K L
)%%L M
)%%M N
;%%N O
}&& 
else'' 
{(( 
claims)) 
.)) 
Add)) 
()) 
new)) 
Claim)) $
())$ %

ClaimTypes))% /
.))/ 0
Role))0 4
,))4 5
$str))6 @
)))@ A
)))A B
;))B C
claims** 
.** 
Add** 
(** 
new** 
Claim** $
(**$ %
$str**% 1
,**1 2
empleado**3 ;
.**; <
EmpId**< A
.**A B
ToString**B J
(**J K
)**K L
)**L M
)**M N
;**N O
}++ 
var-- 
key-- 
=-- 
new--  
SymmetricSecurityKey-- .
(--. /
Encoding--/ 7
.--7 8
UTF8--8 <
.--< =
GetBytes--= E
(--E F
_jwtSettings--F R
.--R S
Secret--S Y
)--Y Z
)--Z [
;--[ \
var.. 
creds.. 
=.. 
new.. 
SigningCredentials.. .
(... /
key../ 2
,..2 3
SecurityAlgorithms..4 F
...F G

HmacSha256..G Q
)..Q R
;..R S
var00 

expiration00 
=00 
DateTime00 %
.00% &
UtcNow00& ,
.00, -

AddMinutes00- 7
(007 8
_jwtSettings008 D
.00D E
ExpiryMinutes00E R
)00R S
;00S T
var22 
token22 
=22 
new22 
JwtSecurityToken22 ,
(22, -
issuer33 
:33 
_jwtSettings33 $
.33$ %
Issuer33% +
,33+ ,
audience44 
:44 
_jwtSettings44 &
.44& '
Audience44' /
,44/ 0
claims55 
:55 
claims55 
,55 
expires66 
:66 

expiration66 #
,66# $
signingCredentials77 "
:77" #
creds77$ )
)77) *
;77* +
var99 
tokenString99 
=99 
new99 !#
JwtSecurityTokenHandler99" 9
(999 :
)99: ;
.99; <

WriteToken99< F
(99F G
token99G L
)99L M
;99M N
return;; 
new;; 
JwtTokenResult;; %
{<< 
Token== 
=== 
tokenString== #
,==# $

Expiration>> 
=>> 

expiration>> '
}?? 
;?? 
}@@ 	
}AA 
}BB Î	
éC:\Users\sawad\Downloads\repositorios_gitlab_dicrep\api_remates_fase1\DICREP.EcommerceSubastas.Infrastructure\Services\BCryptPasswordHasher.cs
	namespace 	
DICREP
 
. 
EcommerceSubastas "
." #
Infrastructure# 1
.1 2
Services2 :
{		 
public

 

class

  
BCryptPasswordHasher

 %
:

& '
IPasswordHasher

( 7
{ 
public 
string 
Hash 
( 
string !
password" *
)* +
=>, .
BCrypt 
. 
Net 
. 
BCrypt 
. 
HashPassword *
(* +
password+ 3
)3 4
;4 5
public 
bool 
Verify 
( 
string !
password" *
,* +
string, 2

storedHash3 =
)= >
=>? A
BCrypt 
. 
Net 
. 
BCrypt 
. 
Verify $
($ %
password% -
,- .

storedHash/ 9
)9 :
;: ;
} 
} ì∑
óC:\Users\sawad\Downloads\repositorios_gitlab_dicrep\api_remates_fase1\DICREP.EcommerceSubastas.Infrastructure\Persistence\EcoCircular07082025Context.cs
	namespace 	
DICREP
 
. 
EcommerceSubastas "
." #
Infrastructure# 1
.1 2
Data2 6
.6 7
Persistence7 B
;B C
public 
partial 
class &
EcoCircular07082025Context /
:0 1
	DbContext2 ;
{		 
public

 
&
EcoCircular07082025Context

 %
(

% &
)

& '
{ 
} 
public 
&
EcoCircular07082025Context %
(% &
DbContextOptions& 6
<6 7&
EcoCircular07082025Context7 Q
>Q R
optionsS Z
)Z [
: 	
base
 
( 
options 
) 
{ 
} 
public 

virtual 
DbSet 
< 
Adjudicatario &
>& '
Adjudicatarios( 6
{7 8
get9 <
;< =
set> A
;A B
}C D
public 

virtual 
DbSet 
< 
	Auditoria "
>" #

Auditorias$ .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 

virtual 
DbSet 
< 
Banco 
> 
Bancos  &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 

virtual 
DbSet 
< 
Clprenda !
>! "
	Clprendas# ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 

virtual 
DbSet 
< 
Comuna 
>  
Comunas! (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 

virtual 
DbSet 
< 
ContactoOrganismo *
>* +
ContactoOrganismos, >
{? @
getA D
;D E
setF I
;I J
}K L
public 

virtual 
DbSet 
< 
CuentasBancaria (
>( )
CuentasBancarias* :
{; <
get= @
;@ A
setB E
;E F
}G H
public!! 

virtual!! 
DbSet!! 
<!! 
Empleado!! !
>!!! "
	Empleados!!# ,
{!!- .
get!!/ 2
;!!2 3
set!!4 7
;!!7 8
}!!9 :
public## 

virtual## 
DbSet## 
<## 
EstadosBiene## %
>##% &
EstadosBienes##' 4
{##5 6
get##7 :
;##: ;
set##< ?
;##? @
}##A B
public%% 

virtual%% 
DbSet%% 
<%% 
EstadosPrenda%% &
>%%& '
EstadosPrendas%%( 6
{%%7 8
get%%9 <
;%%< =
set%%> A
;%%A B
}%%C D
public'' 

virtual'' 
DbSet'' 
<'' 
Feriado''  
>''  !
Feriados''" *
{''+ ,
get''- 0
;''0 1
set''2 5
;''5 6
}''7 8
public)) 

virtual)) 
DbSet)) 
<)) 
Foto)) 
>)) 
Fotos)) $
{))% &
get))' *
;))* +
set)), /
;))/ 0
}))1 2
public++ 

virtual++ 
DbSet++ 
<++ 
Funcionalidade++ '
>++' (
Funcionalidades++) 8
{++9 :
get++; >
;++> ?
set++@ C
;++C D
}++E F
public-- 

virtual-- 
DbSet-- 
<-- 
HistorialPrenda-- (
>--( )
HistorialPrendas--* :
{--; <
get--= @
;--@ A
set--B E
;--E F
}--G H
public// 

virtual// 
DbSet// 
<// 
InformesTecnico// (
>//( )
InformesTecnicos//* :
{//; <
get//= @
;//@ A
set//B E
;//E F
}//G H
public11 

virtual11 
DbSet11 
<11 
	LogErrore11 "
>11" #

LogErrores11$ .
{11/ 0
get111 4
;114 5
set116 9
;119 :
}11; <
public33 

virtual33 
DbSet33 
<33 
	Organismo33 "
>33" #

Organismos33$ .
{33/ 0
get331 4
;334 5
set336 9
;339 :
}33; <
public55 

virtual55 
DbSet55 
<55 
	Parametro55 "
>55" #

Parametros55$ .
{55/ 0
get551 4
;554 5
set556 9
;559 :
}55; <
public77 

virtual77 
DbSet77 
<77 
Perfile77  
>77  !
Perfiles77" *
{77+ ,
get77- 0
;770 1
set772 5
;775 6
}777 8
public99 

virtual99 
DbSet99 
<99 
Permiso99  
>99  !
Permisos99" *
{99+ ,
get99- 0
;990 1
set992 5
;995 6
}997 8
public;; 

virtual;; 
DbSet;; 
<;; 
Producto;; !
>;;! "
	Productos;;# ,
{;;- .
get;;/ 2
;;;2 3
set;;4 7
;;;7 8
};;9 :
public== 

virtual== 
DbSet== 
<== 
	Provincia== "
>==" #

Provincias==$ .
{==/ 0
get==1 4
;==4 5
set==6 9
;==9 :
}==; <
public?? 

virtual?? 
DbSet?? 
<?? 
Regione??  
>??  !
Regiones??" *
{??+ ,
get??- 0
;??0 1
set??2 5
;??5 6
}??7 8
publicAA 

virtualAA 
DbSetAA 
<AA "
ResultadosAdjudicacionAA /
>AA/ 0#
ResultadosAdjudicacionsAA1 H
{AAI J
getAAK N
;AAN O
setAAP S
;AAS T
}AAU V
publicCC 

virtualCC 
DbSetCC 
<CC 
	SucursaleCC "
>CC" #

SucursalesCC$ .
{CC/ 0
getCC1 4
;CC4 5
setCC6 9
;CC9 :
}CC; <
publicEE 

virtualEE 
DbSetEE 
<EE 
TipoAuditoriaEE &
>EE& '
TipoAuditoriasEE( 6
{EE7 8
getEE9 <
;EE< =
setEE> A
;EEA B
}EEC D
publicGG 

virtualGG 
DbSetGG 
<GG 

TipoCuentaGG #
>GG# $
TipoCuentasGG% 0
{GG1 2
getGG3 6
;GG6 7
setGG8 ;
;GG; <
}GG= >
	protectedII 
overrideII 
voidII 
OnConfiguringII )
(II) *#
DbContextOptionsBuilderII* A
optionsBuilderIIB P
)IIP Q
=>KK 

optionsBuilderKK 
.KK 
UseSqlServerKK &
(KK& '
$str	KK' §
)
KK§ •
;
KK• ¶
	protectedMM 
overrideMM 
voidMM 
OnModelCreatingMM +
(MM+ ,
ModelBuilderMM, 8
modelBuilderMM9 E
)MME F
{NN 
modelBuilderOO 
.OO 
EntityOO 
<OO 
AdjudicatarioOO )
>OO) *
(OO* +
entityOO+ 1
=>OO2 4
{PP 	
entityQQ 
.QQ 
HasKeyQQ 
(QQ 
eQQ 
=>QQ 
eQQ  
.QQ  !
AdjIdQQ! &
)QQ& '
.QQ' (
HasNameQQ( /
(QQ/ 0
$strQQ0 P
)QQP Q
;QQQ R
entitySS 
.SS 
HasOneSS 
(SS 
dSS 
=>SS 
dSS  
.SS  !
ComunaSS! '
)SS' (
.SS( )
WithManySS) 1
(SS1 2
pSS2 3
=>SS4 6
pSS7 8
.SS8 9
AdjudicatariosSS9 G
)SSG H
.SSH I
HasConstraintNameSSI Z
(SSZ [
$strSS[ {
)SS{ |
;SS| }
}TT 	
)TT	 

;TT
 
modelBuilderVV 
.VV 
EntityVV 
<VV 
	AuditoriaVV %
>VV% &
(VV& '
entityVV' -
=>VV. 0
{WW 	
entityXX 
.XX 
HasKeyXX 
(XX 
eXX 
=>XX 
eXX  
.XX  !
AuditoriaIdXX! ,
)XX, -
.XX- .
HasNameXX. 5
(XX5 6
$strXX6 V
)XXV W
;XXW X
entityZZ 
.ZZ 
PropertyZZ 
(ZZ 
eZZ 
=>ZZ  
eZZ! "
.ZZ" #
AuditoriaFechaZZ# 1
)ZZ1 2
.ZZ2 3
HasDefaultValueSqlZZ3 E
(ZZE F
$strZZF S
)ZZS T
;ZZT U
entity\\ 
.\\ 
HasOne\\ 
(\\ 
d\\ 
=>\\ 
d\\  
.\\  !
Emp\\! $
)\\$ %
.\\% &
WithMany\\& .
(\\. /
p\\/ 0
=>\\1 3
p\\4 5
.\\5 6
	Auditoria\\6 ?
)\\? @
.]] 
OnDelete]] 
(]] 
DeleteBehavior]] (
.]]( )
ClientSetNull]]) 6
)]]6 7
.^^ 
HasConstraintName^^ "
(^^" #
$str^^# :
)^^: ;
;^^; <
entity`` 
.`` 
HasOne`` 
(`` 
d`` 
=>`` 
d``  
.``  !
TipoAuditoria``! .
)``. /
.``/ 0
WithMany``0 8
(``8 9
p``9 :
=>``; =
p``> ?
.``? @
	Auditoria``@ I
)``I J
.aa 
OnDeleteaa 
(aa 
DeleteBehavioraa (
.aa( )
ClientSetNullaa) 6
)aa6 7
.bb 
HasConstraintNamebb "
(bb" #
$strbb# ?
)bb? @
;bb@ A
}cc 	
)cc	 

;cc
 
modelBuilderee 
.ee 
Entityee 
<ee 
Bancoee !
>ee! "
(ee" #
entityee# )
=>ee* ,
{ff 	
entitygg 
.gg 
HasKeygg 
(gg 
egg 
=>gg 
egg  
.gg  !
BancoIdgg! (
)gg( )
.gg) *
HasNamegg* 1
(gg1 2
$strgg2 P
)ggP Q
;ggQ R
entityii 
.ii 
Propertyii 
(ii 
eii 
=>ii  
eii! "
.ii" #
BancoIdii# *
)ii* +
.ii+ ,
ValueGeneratedNeverii, ?
(ii? @
)ii@ A
;iiA B
}jj 	
)jj	 

;jj
 
modelBuilderll 
.ll 
Entityll 
<ll 
Clprendall $
>ll$ %
(ll% &
entityll& ,
=>ll- /
{mm 	
entitynn 
.nn 
HasKeynn 
(nn 
enn 
=>nn 
enn  
.nn  !

ClprendaIdnn! +
)nn+ ,
.nn, -
HasNamenn- 4
(nn4 5
$strnn5 U
)nnU V
;nnV W
entitypp 
.pp 
HasOnepp 
(pp 
dpp 
=>pp 
dpp  
.pp  !
Emppp! $
)pp$ %
.pp% &
WithManypp& .
(pp. /
ppp/ 0
=>pp1 3
ppp4 5
.pp5 6
Clprendapp6 >
)pp> ?
.pp? @
HasConstraintNamepp@ Q
(ppQ R
$strppR i
)ppi j
;ppj k
entityrr 
.rr 
HasOnerr 
(rr 
drr 
=>rr 
drr  
.rr  !
EstBienrr! (
)rr( )
.rr) *
WithManyrr* 2
(rr2 3
prr3 4
=>rr5 7
prr8 9
.rr9 :
Clprendarr: B
)rrB C
.rrC D
HasConstraintNamerrD U
(rrU V
$strrrV n
)rrn o
;rro p
entitytt 
.tt 
HasOnett 
(tt 
dtt 
=>tt 
dtt  
.tt  !
	EstPrendatt! *
)tt* +
.tt+ ,
WithManytt, 4
(tt4 5
ptt5 6
=>tt7 9
ptt: ;
.tt; <
Clprendatt< D
)ttD E
.ttE F
HasConstraintNamettF W
(ttW X
$strttX p
)ttp q
;ttq r
entityvv 
.vv 
HasOnevv 
(vv 
dvv 
=>vv 
dvv  
.vv  !
	Organismovv! *
)vv* +
.vv+ ,
WithManyvv, 4
(vv4 5
pvv5 6
=>vv7 9
pvv: ;
.vv; <
Clprendavv< D
)vvD E
.vvE F
HasConstraintNamevvF W
(vvW X
$strvvX g
)vvg h
;vvh i
entityxx 
.xx 
HasOnexx 
(xx 
dxx 
=>xx 
dxx  
.xx  !
Productoxx! )
)xx) *
.xx* +
WithManyxx+ 3
(xx3 4
pxx4 5
=>xx6 8
pxx9 :
.xx: ;
Clprendaxx; C
)xxC D
.xxD E
HasConstraintNamexxE V
(xxV W
$strxxW n
)xxn o
;xxo p
}yy 	
)yy	 

;yy
 
modelBuilder{{ 
.{{ 
Entity{{ 
<{{ 
Comuna{{ "
>{{" #
({{# $
entity{{$ *
=>{{+ -
{|| 	
entity}} 
.}} 
HasKey}} 
(}} 
e}} 
=>}} 
e}}  
.}}  !
ComunaId}}! )
)}}) *
.}}* +
HasName}}+ 2
(}}2 3
$str}}3 R
)}}R S
;}}S T
entity 
. 
HasOne 
( 
d 
=> 
d  
.  !
	Provincia! *
)* +
.+ ,
WithMany, 4
(4 5
p5 6
=>7 9
p: ;
.; <
Comunas< C
)C D
.
ÄÄ 
OnDelete
ÄÄ 
(
ÄÄ 
DeleteBehavior
ÄÄ (
.
ÄÄ( )
ClientSetNull
ÄÄ) 6
)
ÄÄ6 7
.
ÅÅ 
HasConstraintName
ÅÅ "
(
ÅÅ" #
$str
ÅÅ# C
)
ÅÅC D
;
ÅÅD E
}
ÇÇ 	
)
ÇÇ	 

;
ÇÇ
 
modelBuilder
ÑÑ 
.
ÑÑ 
Entity
ÑÑ 
<
ÑÑ 
ContactoOrganismo
ÑÑ -
>
ÑÑ- .
(
ÑÑ. /
entity
ÑÑ/ 5
=>
ÑÑ6 8
{
ÖÖ 	
entity
ÜÜ 
.
ÜÜ 
HasKey
ÜÜ 
(
ÜÜ 
e
ÜÜ 
=>
ÜÜ 
e
ÜÜ  
.
ÜÜ  !
	ContOrgId
ÜÜ! *
)
ÜÜ* +
.
ÜÜ+ ,
HasName
ÜÜ, 3
(
ÜÜ3 4
$str
ÜÜ4 T
)
ÜÜT U
;
ÜÜU V
entity
àà 
.
àà 
HasOne
àà 
(
àà 
d
àà 
=>
àà 
d
àà  
.
àà  !
Comuna
àà! '
)
àà' (
.
àà( )
WithMany
àà) 1
(
àà1 2
p
àà2 3
=>
àà4 6
p
àà7 8
.
àà8 9 
ContactoOrganismos
àà9 K
)
ààK L
.
ââ 
OnDelete
ââ 
(
ââ 
DeleteBehavior
ââ (
.
ââ( )
ClientSetNull
ââ) 6
)
ââ6 7
.
ää 
HasConstraintName
ää "
(
ää" #
$str
ää# A
)
ääA B
;
ääB C
entity
åå 
.
åå 
HasOne
åå 
(
åå 
d
åå 
=>
åå 
d
åå  
.
åå  !
	Organismo
åå! *
)
åå* +
.
åå+ ,
WithMany
åå, 4
(
åå4 5
p
åå5 6
=>
åå7 9
p
åå: ;
.
åå; < 
ContactoOrganismos
åå< N
)
ååN O
.
çç 
OnDelete
çç 
(
çç 
DeleteBehavior
çç (
.
çç( )
ClientSetNull
çç) 6
)
çç6 7
.
éé 
HasConstraintName
éé "
(
éé" #
$str
éé# D
)
ééD E
;
ééE F
}
èè 	
)
èè	 

;
èè
 
modelBuilder
ëë 
.
ëë 
Entity
ëë 
<
ëë 
CuentasBancaria
ëë +
>
ëë+ ,
(
ëë, -
entity
ëë- 3
=>
ëë4 6
{
íí 	
entity
ìì 
.
ìì 
HasKey
ìì 
(
ìì 
e
ìì 
=>
ìì 
e
ìì  
.
ìì  !
CuentaId
ìì! )
)
ìì) *
.
ìì* +
HasName
ìì+ 2
(
ìì2 3
$str
ìì3 S
)
ììS T
;
ììT U
entity
ïï 
.
ïï 
HasOne
ïï 
(
ïï 
d
ïï 
=>
ïï 
d
ïï  
.
ïï  !
Banco
ïï! &
)
ïï& '
.
ïï' (
WithMany
ïï( 0
(
ïï0 1
p
ïï1 2
=>
ïï3 5
p
ïï6 7
.
ïï7 8
CuentasBancaria
ïï8 G
)
ïïG H
.
ïïH I
HasConstraintName
ïïI Z
(
ïïZ [
$str
ïï[ {
)
ïï{ |
;
ïï| }
entity
óó 
.
óó 
HasOne
óó 
(
óó 
d
óó 
=>
óó 
d
óó  
.
óó  !
	Organismo
óó! *
)
óó* +
.
óó+ ,
WithMany
óó, 4
(
óó4 5
p
óó5 6
=>
óó7 9
p
óó: ;
.
óó; <
CuentasBancaria
óó< K
)
óóK L
.
óóL M
HasConstraintName
óóM ^
(
óó^ _
$str
óó_ 
)óó Ä
;óóÄ Å
entity
ôô 
.
ôô 
HasOne
ôô 
(
ôô 
d
ôô 
=>
ôô 
d
ôô  
.
ôô  !

TipoCuenta
ôô! +
)
ôô+ ,
.
ôô, -
WithMany
ôô- 5
(
ôô5 6
p
ôô6 7
=>
ôô8 :
p
ôô; <
.
ôô< =
CuentasBancaria
ôô= L
)
ôôL M
.
ôôM N
HasConstraintName
ôôN _
(
ôô_ `
$strôô` Ä
)ôôÄ Å
;ôôÅ Ç
}
öö 	
)
öö	 

;
öö
 
modelBuilder
úú 
.
úú 
Entity
úú 
<
úú 
Empleado
úú $
>
úú$ %
(
úú% &
entity
úú& ,
=>
úú- /
{
ùù 	
entity
ûû 
.
ûû 
HasKey
ûû 
(
ûû 
e
ûû 
=>
ûû 
e
ûû  
.
ûû  !
EmpId
ûû! &
)
ûû& '
.
ûû' (
HasName
ûû( /
(
ûû/ 0
$str
ûû0 P
)
ûûP Q
;
ûûQ R
entity
†† 
.
†† 
HasOne
†† 
(
†† 
d
†† 
=>
†† 
d
††  
.
††  !
Perfil
††! '
)
††' (
.
††( )
WithMany
††) 1
(
††1 2
p
††2 3
=>
††4 6
p
††7 8
.
††8 9
	Empleados
††9 B
)
††B C
.
°° 
OnDelete
°° 
(
°° 
DeleteBehavior
°° (
.
°°( )
ClientSetNull
°°) 6
)
°°6 7
.
¢¢ 
HasConstraintName
¢¢ "
(
¢¢" #
$str
¢¢# C
)
¢¢C D
;
¢¢D E
entity
§§ 
.
§§ 
HasOne
§§ 
(
§§ 
d
§§ 
=>
§§ 
d
§§  
.
§§  !
Sucursal
§§! )
)
§§) *
.
§§* +
WithMany
§§+ 3
(
§§3 4
p
§§4 5
=>
§§6 8
p
§§9 :
.
§§: ;
	Empleados
§§; D
)
§§D E
.
•• 
OnDelete
•• 
(
•• 
DeleteBehavior
•• (
.
••( )
ClientSetNull
••) 6
)
••6 7
.
¶¶ 
HasConstraintName
¶¶ "
(
¶¶" #
$str
¶¶# C
)
¶¶C D
;
¶¶D E
}
ßß 	
)
ßß	 

;
ßß
 
modelBuilder
©© 
.
©© 
Entity
©© 
<
©© 
EstadosBiene
©© (
>
©©( )
(
©©) *
entity
©©* 0
=>
©©1 3
{
™™ 	
entity
´´ 
.
´´ 
HasKey
´´ 
(
´´ 
e
´´ 
=>
´´ 
e
´´  
.
´´  !
	EstBienId
´´! *
)
´´* +
.
´´+ ,
HasName
´´, 3
(
´´3 4
$str
´´4 T
)
´´T U
;
´´U V
entity
≠≠ 
.
≠≠ 
Property
≠≠ 
(
≠≠ 
e
≠≠ 
=>
≠≠  
e
≠≠! "
.
≠≠" #
	EstBienId
≠≠# ,
)
≠≠, -
.
≠≠- .!
ValueGeneratedNever
≠≠. A
(
≠≠A B
)
≠≠B C
;
≠≠C D
}
ÆÆ 	
)
ÆÆ	 

;
ÆÆ
 
modelBuilder
∞∞ 
.
∞∞ 
Entity
∞∞ 
<
∞∞ 
EstadosPrenda
∞∞ )
>
∞∞) *
(
∞∞* +
entity
∞∞+ 1
=>
∞∞2 4
{
±± 	
entity
≤≤ 
.
≤≤ 
HasKey
≤≤ 
(
≤≤ 
e
≤≤ 
=>
≤≤ 
e
≤≤  
.
≤≤  !
EstPrendaId
≤≤! ,
)
≤≤, -
.
≤≤- .
HasName
≤≤. 5
(
≤≤5 6
$str
≤≤6 V
)
≤≤V W
;
≤≤W X
}
≥≥ 	
)
≥≥	 

;
≥≥
 
modelBuilder
µµ 
.
µµ 
Entity
µµ 
<
µµ 
Feriado
µµ #
>
µµ# $
(
µµ$ %
entity
µµ% +
=>
µµ, .
{
∂∂ 	
entity
∑∑ 
.
∑∑ 
HasKey
∑∑ 
(
∑∑ 
e
∑∑ 
=>
∑∑ 
e
∑∑  
.
∑∑  !
Fecha
∑∑! &
)
∑∑& '
.
∑∑' (
HasName
∑∑( /
(
∑∑/ 0
$str
∑∑0 P
)
∑∑P Q
;
∑∑Q R
entity
ππ 
.
ππ 
Property
ππ 
(
ππ 
e
ππ 
=>
ππ  
e
ππ! "
.
ππ" #
Activo
ππ# )
)
ππ) *
.
ππ* +
HasDefaultValue
ππ+ :
(
ππ: ;
true
ππ; ?
)
ππ? @
;
ππ@ A
entity
∫∫ 
.
∫∫ 
Property
∫∫ 
(
∫∫ 
e
∫∫ 
=>
∫∫  
e
∫∫! "
.
∫∫" #

EsRegional
∫∫# -
)
∫∫- .
.
∫∫. /
HasDefaultValue
∫∫/ >
(
∫∫> ?
false
∫∫? D
)
∫∫D E
;
∫∫E F
}
ªª 	
)
ªª	 

;
ªª
 
modelBuilder
ΩΩ 
.
ΩΩ 
Entity
ΩΩ 
<
ΩΩ 
Foto
ΩΩ  
>
ΩΩ  !
(
ΩΩ! "
entity
ΩΩ" (
=>
ΩΩ) +
{
ææ 	
entity
øø 
.
øø 
HasKey
øø 
(
øø 
e
øø 
=>
øø 
e
øø  
.
øø  !
FotoId
øø! '
)
øø' (
.
øø( )
HasName
øø) 0
(
øø0 1
$str
øø1 N
)
øøN O
;
øøO P
entity
¡¡ 
.
¡¡ 
HasOne
¡¡ 
(
¡¡ 
d
¡¡ 
=>
¡¡ 
d
¡¡  
.
¡¡  !
Clprenda
¡¡! )
)
¡¡) *
.
¡¡* +
WithMany
¡¡+ 3
(
¡¡3 4
p
¡¡4 5
=>
¡¡6 8
p
¡¡9 :
.
¡¡: ;
Fotos
¡¡; @
)
¡¡@ A
.
¡¡A B
HasConstraintName
¡¡B S
(
¡¡S T
$str
¡¡T t
)
¡¡t u
;
¡¡u v
}
¬¬ 	
)
¬¬	 

;
¬¬
 
modelBuilder
ƒƒ 
.
ƒƒ 
Entity
ƒƒ 
<
ƒƒ 
Funcionalidade
ƒƒ *
>
ƒƒ* +
(
ƒƒ+ ,
entity
ƒƒ, 2
=>
ƒƒ3 5
{
≈≈ 	
entity
∆∆ 
.
∆∆ 
HasKey
∆∆ 
(
∆∆ 
e
∆∆ 
=>
∆∆ 
e
∆∆  
.
∆∆  !
FuncionalidadId
∆∆! 0
)
∆∆0 1
.
∆∆1 2
HasName
∆∆2 9
(
∆∆9 :
$str
∆∆: Z
)
∆∆Z [
;
∆∆[ \
}
«« 	
)
««	 

;
««
 
modelBuilder
…… 
.
…… 
Entity
…… 
<
…… 
HistorialPrenda
…… +
>
……+ ,
(
……, -
entity
……- 3
=>
……4 6
{
   	
entity
ÀÀ 
.
ÀÀ 
HasKey
ÀÀ 
(
ÀÀ 
e
ÀÀ 
=>
ÀÀ 
e
ÀÀ  
.
ÀÀ  !
HistPrendaId
ÀÀ! -
)
ÀÀ- .
.
ÀÀ. /
HasName
ÀÀ/ 6
(
ÀÀ6 7
$str
ÀÀ7 W
)
ÀÀW X
;
ÀÀX Y
entity
ÕÕ 
.
ÕÕ 
HasOne
ÕÕ 
(
ÕÕ 
d
ÕÕ 
=>
ÕÕ 
d
ÕÕ  
.
ÕÕ  !
Clprenda
ÕÕ! )
)
ÕÕ) *
.
ÕÕ* +
WithMany
ÕÕ+ 3
(
ÕÕ3 4
p
ÕÕ4 5
=>
ÕÕ6 8
p
ÕÕ9 :
.
ÕÕ: ;
HistorialPrenda
ÕÕ; J
)
ÕÕJ K
.
ÕÕK L
HasConstraintName
ÕÕL ]
(
ÕÕ] ^
$str
ÕÕ^ ~
)
ÕÕ~ 
;ÕÕ Ä
entity
œœ 
.
œœ 
HasOne
œœ 
(
œœ 
d
œœ 
=>
œœ 
d
œœ  
.
œœ  !
	EstPrenda
œœ! *
)
œœ* +
.
œœ+ ,
WithMany
œœ, 4
(
œœ4 5
p
œœ5 6
=>
œœ7 9
p
œœ: ;
.
œœ; <
HistorialPrenda
œœ< K
)
œœK L
.
–– 
OnDelete
–– 
(
–– 
DeleteBehavior
–– (
.
––( )
ClientSetNull
––) 6
)
––6 7
.
—— 
HasConstraintName
—— "
(
——" #
$str
——# C
)
——C D
;
——D E
}
““ 	
)
““	 

;
““
 
modelBuilder
‘‘ 
.
‘‘ 
Entity
‘‘ 
<
‘‘ 
InformesTecnico
‘‘ +
>
‘‘+ ,
(
‘‘, -
entity
‘‘- 3
=>
‘‘4 6
{
’’ 	
entity
÷÷ 
.
÷÷ 
HasKey
÷÷ 
(
÷÷ 
e
÷÷ 
=>
÷÷ 
e
÷÷  
.
÷÷  !
InformeTecId
÷÷! -
)
÷÷- .
.
÷÷. /
HasName
÷÷/ 6
(
÷÷6 7
$str
÷÷7 W
)
÷÷W X
;
÷÷X Y
entity
ÿÿ 
.
ÿÿ 
HasOne
ÿÿ 
(
ÿÿ 
d
ÿÿ 
=>
ÿÿ 
d
ÿÿ  
.
ÿÿ  !
Clprenda
ÿÿ! )
)
ÿÿ) *
.
ÿÿ* +
WithMany
ÿÿ+ 3
(
ÿÿ3 4
p
ÿÿ4 5
=>
ÿÿ6 8
p
ÿÿ9 :
.
ÿÿ: ;
InformesTecnicos
ÿÿ; K
)
ÿÿK L
.
ŸŸ 
OnDelete
ŸŸ 
(
ŸŸ 
DeleteBehavior
ŸŸ (
.
ŸŸ( )
ClientSetNull
ŸŸ) 6
)
ŸŸ6 7
.
⁄⁄ 
HasConstraintName
⁄⁄ "
(
⁄⁄" #
$str
⁄⁄# ;
)
⁄⁄; <
;
⁄⁄< =
}
€€ 	
)
€€	 

;
€€
 
modelBuilder
›› 
.
›› 
Entity
›› 
<
›› 
	LogErrore
›› %
>
››% &
(
››& '
entity
››' -
=>
››. 0
{
ﬁﬁ 	
entity
ﬂﬂ 
.
ﬂﬂ 
HasKey
ﬂﬂ 
(
ﬂﬂ 
e
ﬂﬂ 
=>
ﬂﬂ 
e
ﬂﬂ  
.
ﬂﬂ  !
LogId
ﬂﬂ! &
)
ﬂﬂ& '
.
ﬂﬂ' (
HasName
ﬂﬂ( /
(
ﬂﬂ/ 0
$str
ﬂﬂ0 P
)
ﬂﬂP Q
;
ﬂﬂQ R
entity
·· 
.
·· 
Property
·· 
(
·· 
e
·· 
=>
··  
e
··! "
.
··" #
	FechaHora
··# ,
)
··, -
.
··- . 
HasDefaultValueSql
··. @
(
··@ A
$str
··A N
)
··N O
;
··O P
}
‚‚ 	
)
‚‚	 

;
‚‚
 
modelBuilder
‰‰ 
.
‰‰ 
Entity
‰‰ 
<
‰‰ 
	Organismo
‰‰ %
>
‰‰% &
(
‰‰& '
entity
‰‰' -
=>
‰‰. 0
{
ÂÂ 	
entity
ÊÊ 
.
ÊÊ 
HasKey
ÊÊ 
(
ÊÊ 
e
ÊÊ 
=>
ÊÊ 
e
ÊÊ  
.
ÊÊ  !
OrganismoId
ÊÊ! ,
)
ÊÊ, -
.
ÊÊ- .
HasName
ÊÊ. 5
(
ÊÊ5 6
$str
ÊÊ6 V
)
ÊÊV W
;
ÊÊW X
entity
ËË 
.
ËË 
Property
ËË 
(
ËË 
e
ËË 
=>
ËË  
e
ËË! "
.
ËË" #
OrganismoActiva
ËË# 2
)
ËË2 3
.
ËË3 4
HasDefaultValue
ËË4 C
(
ËËC D
true
ËËD H
)
ËËH I
;
ËËI J
}
ÈÈ 	
)
ÈÈ	 

;
ÈÈ
 
modelBuilder
ÎÎ 
.
ÎÎ 
Entity
ÎÎ 
<
ÎÎ 
	Parametro
ÎÎ %
>
ÎÎ% &
(
ÎÎ& '
entity
ÎÎ' -
=>
ÎÎ. 0
{
ÏÏ 	
entity
ÌÌ 
.
ÌÌ 
HasKey
ÌÌ 
(
ÌÌ 
e
ÌÌ 
=>
ÌÌ 
e
ÌÌ  
.
ÌÌ  !
ParametroId
ÌÌ! ,
)
ÌÌ, -
.
ÌÌ- .
HasName
ÌÌ. 5
(
ÌÌ5 6
$str
ÌÌ6 V
)
ÌÌV W
;
ÌÌW X
entity
ÔÔ 
.
ÔÔ 
Property
ÔÔ 
(
ÔÔ 
e
ÔÔ 
=>
ÔÔ  
e
ÔÔ! "
.
ÔÔ" #)
ParametroFechaActualizacion
ÔÔ# >
)
ÔÔ> ?
.
ÔÔ? @ 
HasDefaultValueSql
ÔÔ@ R
(
ÔÔR S
$str
ÔÔS `
)
ÔÔ` a
;
ÔÔa b
}
 	
)
	 

;

 
modelBuilder
ÚÚ 
.
ÚÚ 
Entity
ÚÚ 
<
ÚÚ 
Perfile
ÚÚ #
>
ÚÚ# $
(
ÚÚ$ %
entity
ÚÚ% +
=>
ÚÚ, .
{
ÛÛ 	
entity
ÙÙ 
.
ÙÙ 
HasKey
ÙÙ 
(
ÙÙ 
e
ÙÙ 
=>
ÙÙ 
e
ÙÙ  
.
ÙÙ  !
PerfilId
ÙÙ! )
)
ÙÙ) *
.
ÙÙ* +
HasName
ÙÙ+ 2
(
ÙÙ2 3
$str
ÙÙ3 S
)
ÙÙS T
;
ÙÙT U
}
ıı 	
)
ıı	 

;
ıı
 
modelBuilder
˜˜ 
.
˜˜ 
Entity
˜˜ 
<
˜˜ 
Permiso
˜˜ #
>
˜˜# $
(
˜˜$ %
entity
˜˜% +
=>
˜˜, .
{
¯¯ 	
entity
˘˘ 
.
˘˘ 
HasKey
˘˘ 
(
˘˘ 
e
˘˘ 
=>
˘˘ 
e
˘˘  
.
˘˘  !
	PermisoId
˘˘! *
)
˘˘* +
.
˘˘+ ,
HasName
˘˘, 3
(
˘˘3 4
$str
˘˘4 T
)
˘˘T U
;
˘˘U V
entity
˚˚ 
.
˚˚ 
HasOne
˚˚ 
(
˚˚ 
d
˚˚ 
=>
˚˚ 
d
˚˚  
.
˚˚  !
Funcionalidad
˚˚! .
)
˚˚. /
.
˚˚/ 0
WithMany
˚˚0 8
(
˚˚8 9
p
˚˚9 :
=>
˚˚; =
p
˚˚> ?
.
˚˚? @
Permisos
˚˚@ H
)
˚˚H I
.
¸¸ 
OnDelete
¸¸ 
(
¸¸ 
DeleteBehavior
¸¸ (
.
¸¸( )
ClientSetNull
¸¸) 6
)
¸¸6 7
.
˝˝ 
HasConstraintName
˝˝ "
(
˝˝" #
$str
˝˝# =
)
˝˝= >
;
˝˝> ?
entity
ˇˇ 
.
ˇˇ 
HasOne
ˇˇ 
(
ˇˇ 
d
ˇˇ 
=>
ˇˇ 
d
ˇˇ  
.
ˇˇ  !
Perfil
ˇˇ! '
)
ˇˇ' (
.
ˇˇ( )
WithMany
ˇˇ) 1
(
ˇˇ1 2
p
ˇˇ2 3
=>
ˇˇ4 6
p
ˇˇ7 8
.
ˇˇ8 9
Permisos
ˇˇ9 A
)
ˇˇA B
.
ÄÄ 
OnDelete
ÄÄ 
(
ÄÄ 
DeleteBehavior
ÄÄ (
.
ÄÄ( )
ClientSetNull
ÄÄ) 6
)
ÄÄ6 7
.
ÅÅ 
HasConstraintName
ÅÅ "
(
ÅÅ" #
$str
ÅÅ# 6
)
ÅÅ6 7
;
ÅÅ7 8
}
ÇÇ 	
)
ÇÇ	 

;
ÇÇ
 
modelBuilder
ÑÑ 
.
ÑÑ 
Entity
ÑÑ 
<
ÑÑ 
Producto
ÑÑ $
>
ÑÑ$ %
(
ÑÑ% &
entity
ÑÑ& ,
=>
ÑÑ- /
{
ÖÖ 	
entity
ÜÜ 
.
ÜÜ 
HasKey
ÜÜ 
(
ÜÜ 
e
ÜÜ 
=>
ÜÜ 
e
ÜÜ  
.
ÜÜ  !

ProductoId
ÜÜ! +
)
ÜÜ+ ,
.
ÜÜ, -
HasName
ÜÜ- 4
(
ÜÜ4 5
$str
ÜÜ5 U
)
ÜÜU V
;
ÜÜV W
}
áá 	
)
áá	 

;
áá
 
modelBuilder
ââ 
.
ââ 
Entity
ââ 
<
ââ 
	Provincia
ââ %
>
ââ% &
(
ââ& '
entity
ââ' -
=>
ââ. 0
{
ää 	
entity
ãã 
.
ãã 
HasKey
ãã 
(
ãã 
e
ãã 
=>
ãã 
e
ãã  
.
ãã  !
ProvinciaId
ãã! ,
)
ãã, -
.
ãã- .
HasName
ãã. 5
(
ãã5 6
$str
ãã6 V
)
ããV W
;
ããW X
entity
çç 
.
çç 
HasOne
çç 
(
çç 
d
çç 
=>
çç 
d
çç  
.
çç  !
Region
çç! '
)
çç' (
.
çç( )
WithMany
çç) 1
(
çç1 2
p
çç2 3
=>
çç4 6
p
çç7 8
.
çç8 9
	Provincia
çç9 B
)
ççB C
.
éé 
OnDelete
éé 
(
éé 
DeleteBehavior
éé (
.
éé( )
ClientSetNull
éé) 6
)
éé6 7
.
èè 
HasConstraintName
èè "
(
èè" #
$str
èè# C
)
èèC D
;
èèD E
}
êê 	
)
êê	 

;
êê
 
modelBuilder
íí 
.
íí 
Entity
íí 
<
íí 
Regione
íí #
>
íí# $
(
íí$ %
entity
íí% +
=>
íí, .
{
ìì 	
entity
îî 
.
îî 
HasKey
îî 
(
îî 
e
îî 
=>
îî 
e
îî  
.
îî  !
RegionId
îî! )
)
îî) *
.
îî* +
HasName
îî+ 2
(
îî2 3
$str
îî3 S
)
îîS T
;
îîT U
}
ïï 	
)
ïï	 

;
ïï
 
modelBuilder
óó 
.
óó 
Entity
óó 
<
óó $
ResultadosAdjudicacion
óó 2
>
óó2 3
(
óó3 4
entity
óó4 :
=>
óó; =
{
òò 	
entity
ôô 
.
ôô 
HasKey
ôô 
(
ôô 
e
ôô 
=>
ôô 
e
ôô  
.
ôô  !
ResultadoId
ôô! ,
)
ôô, -
.
ôô- .
HasName
ôô. 5
(
ôô5 6
$str
ôô6 V
)
ôôV W
;
ôôW X
entity
õõ 
.
õõ 
HasOne
õõ 
(
õõ 
d
õõ 
=>
õõ 
d
õõ  
.
õõ  !
Adj
õõ! $
)
õõ$ %
.
õõ% &
WithMany
õõ& .
(
õõ. /
p
õõ/ 0
=>
õõ1 3
p
õõ4 5
.
õõ5 6%
ResultadosAdjudicacions
õõ6 M
)
õõM N
.
õõN O
HasConstraintName
õõO `
(
õõ` a
$strõõa Å
)õõÅ Ç
;õõÇ É
entity
ùù 
.
ùù 
HasOne
ùù 
(
ùù 
d
ùù 
=>
ùù 
d
ùù  
.
ùù  !
Clprenda
ùù! )
)
ùù) *
.
ùù* +
WithMany
ùù+ 3
(
ùù3 4
p
ùù4 5
=>
ùù6 8
p
ùù9 :
.
ùù: ;%
ResultadosAdjudicacions
ùù; R
)
ùùR S
.
ùùS T
HasConstraintName
ùùT e
(
ùùe f
$strùùf Ü
)ùùÜ á
;ùùá à
}
ûû 	
)
ûû	 

;
ûû
 
modelBuilder
†† 
.
†† 
Entity
†† 
<
†† 
	Sucursale
†† %
>
††% &
(
††& '
entity
††' -
=>
††. 0
{
°° 	
entity
¢¢ 
.
¢¢ 
HasKey
¢¢ 
(
¢¢ 
e
¢¢ 
=>
¢¢ 
e
¢¢  
.
¢¢  !

SucursalId
¢¢! +
)
¢¢+ ,
.
¢¢, -
HasName
¢¢- 4
(
¢¢4 5
$str
¢¢5 U
)
¢¢U V
;
¢¢V W
entity
§§ 
.
§§ 
HasOne
§§ 
(
§§ 
d
§§ 
=>
§§ 
d
§§  
.
§§  !
Comuna
§§! '
)
§§' (
.
§§( )
WithMany
§§) 1
(
§§1 2
p
§§2 3
=>
§§4 6
p
§§7 8
.
§§8 9

Sucursales
§§9 C
)
§§C D
.
•• 
OnDelete
•• 
(
•• 
DeleteBehavior
•• (
.
••( )
ClientSetNull
••) 6
)
••6 7
.
¶¶ 
HasConstraintName
¶¶ "
(
¶¶" #
$str
¶¶# C
)
¶¶C D
;
¶¶D E
}
ßß 	
)
ßß	 

;
ßß
 
modelBuilder
©© 
.
©© 
Entity
©© 
<
©© 
TipoAuditoria
©© )
>
©©) *
(
©©* +
entity
©©+ 1
=>
©©2 4
{
™™ 	
entity
´´ 
.
´´ 
HasKey
´´ 
(
´´ 
e
´´ 
=>
´´ 
e
´´  
.
´´  !
TipoAuditoriaId
´´! 0
)
´´0 1
.
´´1 2
HasName
´´2 9
(
´´9 :
$str
´´: Z
)
´´Z [
;
´´[ \
entity
≠≠ 
.
≠≠ 
Property
≠≠ 
(
≠≠ 
e
≠≠ 
=>
≠≠  
e
≠≠! "
.
≠≠" #!
TipoAuditoriaActivo
≠≠# 6
)
≠≠6 7
.
≠≠7 8
HasDefaultValue
≠≠8 G
(
≠≠G H
true
≠≠H L
)
≠≠L M
;
≠≠M N
}
ÆÆ 	
)
ÆÆ	 

;
ÆÆ
 
modelBuilder
∞∞ 
.
∞∞ 
Entity
∞∞ 
<
∞∞ 

TipoCuenta
∞∞ &
>
∞∞& '
(
∞∞' (
entity
∞∞( .
=>
∞∞/ 1
{
±± 	
entity
≤≤ 
.
≤≤ 
HasKey
≤≤ 
(
≤≤ 
e
≤≤ 
=>
≤≤ 
e
≤≤  
.
≤≤  !
TipoCuentaId
≤≤! -
)
≤≤- .
.
≤≤. /
HasName
≤≤/ 6
(
≤≤6 7
$str
≤≤7 W
)
≤≤W X
;
≤≤X Y
entity
¥¥ 
.
¥¥ 
Property
¥¥ 
(
¥¥ 
e
¥¥ 
=>
¥¥  
e
¥¥! "
.
¥¥" #
TipoCuentaId
¥¥# /
)
¥¥/ 0
.
¥¥0 1!
ValueGeneratedNever
¥¥1 D
(
¥¥D E
)
¥¥E F
;
¥¥F G
}
µµ 	
)
µµ	 

;
µµ
 $
OnModelCreatingPartial
∑∑ 
(
∑∑ 
modelBuilder
∑∑ +
)
∑∑+ ,
;
∑∑, -
}
∏∏ 
partial
∫∫ 
void
∫∫ $
OnModelCreatingPartial
∫∫ '
(
∫∫' (
ModelBuilder
∫∫( 4
modelBuilder
∫∫5 A
)
∫∫A B
;
∫∫B C
}ªª æ
ìC:\Users\sawad\Downloads\repositorios_gitlab_dicrep\api_remates_fase1\DICREP.EcommerceSubastas.Infrastructure\Data\Repositories\PerfilRepository.cs
	namespace 	
DICREP
 
. 
EcommerceSubastas "
." #
Infrastructure# 1
.1 2
Data2 6
.6 7
Repositories7 C
{ 
public 

class 
PerfilRepository !
:" #
IPerfilRepository$ 5
{ 
private 
readonly &
EcoCircular07082025Context 3
_context4 <
;< =
public 
PerfilRepository 
(  &
EcoCircular07082025Context  :
context; B
)B C
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
Perfile !
>! "
GetByIdAsync# /
(/ 0
int0 3
id4 6
)6 7
{ 	
return 
await 
_context !
.! "
Perfiles" *
.* +
	FindAsync+ 4
(4 5
id5 7
)7 8
;8 9
} 	
public 
async 
Task 
< 
Perfile !
>! "
GetByNombreAsync# 3
(3 4
string4 :
nombre; A
)A B
{ 	
return   
await   
_context   !
.  ! "
Perfiles  " *
.  * +
FirstOrDefaultAsync  + >
(  > ?
r  ? @
=>  A C
r  D E
.  E F
PerfilNombre  F R
==  S U
nombre  V \
)  \ ]
;  ] ^
}!! 	
public## 
async## 
Task## 
<## 
IEnumerable## %
<##% &
Perfile##& -
>##- .
>##. /
GetAllAsync##0 ;
(##; <
)##< =
{$$ 	
return%% 
await%% 
_context%% !
.%%! "
Perfiles%%" *
.%%* +
ToListAsync%%+ 6
(%%6 7
)%%7 8
;%%8 9
}&& 	
public(( 
async(( 
Task(( 
<(( 
Perfile(( !
>((! "
CreateAsync((# .
(((. /
Perfile((/ 6
perfil((7 =
)((= >
{)) 	
_context** 
.** 
Perfiles** 
.** 
Add** !
(**! "
perfil**" (
)**( )
;**) *
await++ 
_context++ 
.++ 
SaveChangesAsync++ +
(+++ ,
)++, -
;++- .
return,, 
perfil,, 
;,, 
}-- 	
public// 
async// 
Task// 
<// 
Perfile// !
>//! "
UpdateAsync//# .
(//. /
Perfile/// 6
perfil//7 =
)//= >
{00 	
_context11 
.11 
Perfiles11 
.11 
Update11 $
(11$ %
perfil11% +
)11+ ,
;11, -
await22 
_context22 
.22 
SaveChangesAsync22 +
(22+ ,
)22, -
;22- .
return33 
perfil33 
;33 
}44 	
public66 
async66 
Task66 
<66 
Perfile66 !
>66! "
DeleteAsync66# .
(66. /
Perfile66/ 6
perfil667 =
)66= >
{77 	
_context99 
.99 
Perfiles99 
.99 
Remove99 $
(99$ %
perfil99% +
)99+ ,
;99, -
await:: 
_context:: 
.:: 
SaveChangesAsync:: +
(::+ ,
)::, -
;::- .
return;; 
perfil;; 
;;; 
}<< 	
}?? 
}@@ “

öC:\Users\sawad\Downloads\repositorios_gitlab_dicrep\api_remates_fase1\DICREP.EcommerceSubastas.Infrastructure\Data\Repositories\FuncionalidadRepository.cs
	namespace 	
DICREP
 
. 
EcommerceSubastas "
." #
Infrastructure# 1
.1 2
Data2 6
.6 7
Repositories7 C
{ 
public 

class #
FuncionalidadRepository (
:) *$
IFuncionalidadRepository+ C
{ 
private 
readonly &
EcoCircular07082025Context 3
_context4 <
;< =
public #
FuncionalidadRepository &
(& '&
EcoCircular07082025Context' A
contextB I
)I J
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IEnumerable %
<% &
Funcionalidade& 4
>4 5
>5 6
GetAllAsync7 B
(B C
)C D
{ 	
return 
await 
_context !
.! "
Funcionalidades" 1
.1 2
ToListAsync2 =
(= >
)> ?
;? @
} 	
} 
} ¸%
öC:\Users\sawad\Downloads\repositorios_gitlab_dicrep\api_remates_fase1\DICREP.EcommerceSubastas.Infrastructure\Data\Repositories\FichaProductoRepository.cs
	namespace 	
DICREP
 
. 
EcommerceSubastas "
." #
Infrastructure# 1
.1 2
Data2 6
.6 7
Repositories7 C
{ 
public 

class #
FichaProductoRepository (
:) *$
IFichaProductoRepository+ C
{ 
private 
readonly &
EcoCircular07082025Context 3
_context4 <
;< =
public #
FichaProductoRepository &
(& '&
EcoCircular07082025Context' A
contextB I
)I J
{ 	
_context 
= 
context 
; 
} 	
public   
async   
Task   
<   
ResponseDTO   %
<  % &
int  & )
>  ) *
>  * +
SendFichaAsync  , :
(  : ;
ReceiveFichaDto  ; J
dto  K N
)  N O
{!! 	
var"" 
response"" 
="" 
new"" 
ResponseDTO"" *
<""* +
int""+ .
>"". /
(""/ 0
)""0 1
;""1 2
try$$ 
{%% 
var&& 
json&& 
=&& 
JsonSerializer&& )
.&&) *
	Serialize&&* 3
(&&3 4
dto&&4 7
)&&7 8
;&&8 9
Console'' 
.'' 
	WriteLine'' !
(''! "
json''" &
)''& '
;''' (
var(( 
param(( 
=(( 
new(( 
SqlParameter((  ,
(((, -
$str((- 4
,((4 5
	SqlDbType((6 ?
.((? @
NVarChar((@ H
)((H I
{((J K
Value((L Q
=((R S
json((T X
}((Y Z
;((Z [
int** 
result** 
=** 
await** "
_context**# +
.**+ ,
Database**, 4
.**4 5
ExecuteSqlRawAsync**5 G
(**G H
$str**H k
,**k l
param**m r
)**r s
;**s t
response,, 
.,, 
Data,, 
=,, 
result,,  &
;,,& '
response-- 
.-- 
Success--  
=--! "
true--# '
;--' (
}.. 
catch// 
(// 
SqlException// 
ex//  "
)//" #
{00 
var22 
match22 
=22 
Regex22 !
.22! "
Match22" '
(22' (
ex22( *
.22* +
Message22+ 2
,222 3
$str224 Z
)22Z [
;22[ \
if44 
(44 
match44 
.44 
Success44 !
)44! "
{55 
response66 
.66 
Error66 "
=66# $
new66% (
ErrorResponseDto66) 9
{77 
	ErrorCode88 !
=88" #
int88$ '
.88' (
Parse88( -
(88- .
match88. 3
.883 4
Groups884 :
[88: ;
$str88; A
]88A B
.88B C
Value88C H
)88H I
,88I J
Message99 
=99  !
match99" '
.99' (
Groups99( .
[99. /
$str99/ 4
]994 5
.995 6
Value996 ;
.99; <
Trim99< @
(99@ A
)99A B
}:: 
;:: 
};; 
else<< 
{== 
response>> 
.>> 
Error>> "
=>># $
new>>% (
ErrorResponseDto>>) 9
{?? 
	ErrorCode@@ !
=@@" #
ex@@$ &
.@@& '
Number@@' -
,@@- .
MessageAA 
=AA  !
exAA" $
.AA$ %
MessageAA% ,
}BB 
;BB 
}CC 
responseEE 
.EE 
SuccessEE  
=EE! "
falseEE# (
;EE( )
}FF 
catchGG 
(GG 
	ExceptionGG 
exGG 
)GG  
{HH 
responseII 
.II 
ErrorII 
=II  
newII! $
ErrorResponseDtoII% 5
{JJ 
	ErrorCodeKK 
=KK 
-KK  !
$numKK! $
,KK$ %
MessageLL 
=LL 
$strLL =
+LL> ?
exLL@ B
.LLB C
MessageLLC J
}MM 
;MM 
responseOO 
.OO 
SuccessOO  
=OO! "
falseOO# (
;OO( )
}PP 
returnRR 
responseRR 
;RR 
}SS 	
}XX 
}YY ù

ãC:\Users\sawad\Downloads\repositorios_gitlab_dicrep\api_remates_fase1\DICREP.EcommerceSubastas.Infrastructure\Configurations\JwtSettings.cs
	namespace 	
DICREP
 
. 
EcommerceSubastas "
." #
Infrastructure# 1
.1 2
Configurations2 @
{ 
public		 

class		 
JwtSettings		 
{

 
public 
string 
Secret 
{ 
get "
;" #
set$ '
;' (
}) *
=+ ,
string- 3
.3 4
Empty4 9
;9 :
public 
string 
Issuer 
{ 
get "
;" #
set$ '
;' (
}) *
=+ ,
string- 3
.3 4
Empty4 9
;9 :
public 
string 
Audience 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
public 
int 
ExpiryMinutes  
{! "
get# &
;& '
set( +
;+ ,
}- .
} 
} Ë
ïC:\Users\sawad\Downloads\repositorios_gitlab_dicrep\api_remates_fase1\DICREP.EcommerceSubastas.Infrastructure\Data\Repositories\EmpleadoRepository.cs
	namespace 	
DICREP
 
. 
EcommerceSubastas "
." #
Infrastructure# 1
.1 2
Data2 6
.6 7
Repositories7 C
{ 
public 

class 
EmpleadoRepository #
:$ %
IEmpleadoRepository& 9
{ 
private 
readonly &
EcoCircular07082025Context 3
_context4 <
;< =
public 
EmpleadoRepository !
(! "&
EcoCircular07082025Context" <
context= D
)D E
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
Empleado "
>" #
GetByIdAsync$ 0
(0 1
int1 4
id5 7
)7 8
{ 	
return 
await 
_context !
.! "
	Empleados" +
.+ ,
	FindAsync, 5
(5 6
id6 8
)8 9
;9 :
} 	
public 
async 
Task 
< 
Empleado "
>" #
GetByUsuarioAsync$ 5
(5 6
string6 <
usuario= D
)D E
{ 	
return 
await 
_context !
.! "
	Empleados" +
.+ ,
FirstOrDefaultAsync, ?
(? @
r@ A
=>B D
rE F
.F G

EmpUsuarioG Q
==R T
usuarioU \
)\ ]
;] ^
} 	
public"" 
async"" 
Task"" 
<"" 
IEnumerable"" %
<""% &
Empleado""& .
>"". /
>""/ 0
GetAllAsync""1 <
(""< =
)""= >
{## 	
return$$ 
await$$ 
_context$$ !
.$$! "
	Empleados$$" +
.$$+ ,
ToListAsync$$, 7
($$7 8
)$$8 9
;$$9 :
}%% 	
public'' 
async'' 
Task'' 
<'' 
Empleado'' "
>''" #
CreateAsync''$ /
(''/ 0
Empleado''0 8
empleado''9 A
)''A B
{(( 	
_context)) 
.)) 
	Empleados)) 
.)) 
Add)) "
())" #
empleado))# +
)))+ ,
;)), -
await** 
_context** 
.** 
SaveChangesAsync** +
(**+ ,
)**, -
;**- .
return++ 
empleado++ 
;++ 
},, 	
public.. 
async.. 
Task.. 
<.. 
Empleado.. "
>.." #
UpdateAsync..$ /
(../ 0
Empleado..0 8
empleado..9 A
)..A B
{// 	
_context00 
.00 
	Empleados00 
.00 
Update00 %
(00% &
empleado00& .
)00. /
;00/ 0
await11 
_context11 
.11 
SaveChangesAsync11 +
(11+ ,
)11, -
;11- .
return22 
empleado22 
;22 
}33 	
public55 
async55 
Task55 
<55 
Empleado55 "
>55" #
DeleteAsync55$ /
(55/ 0
Empleado550 8
empleado559 A
)55A B
{66 	
_context88 
.88 
	Empleados88 
.88 
Remove88 %
(88% &
empleado88& .
)88. /
;88/ 0
await99 
_context99 
.99 
SaveChangesAsync99 +
(99+ ,
)99, -
;99- .
return:: 
empleado:: 
;:: 
};; 	
}<< 
}>> ∆
çC:\Users\sawad\Downloads\repositorios_gitlab_dicrep\api_remates_fase1\DICREP.EcommerceSubastas.Infrastructure\Authorization\PermisoService.cs
	namespace 	
DICREP
 
. 
EcommerceSubastas "
." #
Infrastructure# 1
.1 2
Authorization2 ?
{ 
public 

class 
PermisoService 
:  !
IPermisoService" 1
{ 
private 
readonly &
EcoCircular07082025Context 3
_context4 <
;< =
public 
PermisoService 
( &
EcoCircular07082025Context 8
context9 @
)@ A
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
bool 
> %
EmpleadoTienePermisoAsync  9
(9 :
int: =

empleadoId> H
,H I
stringJ P
codigoFuncionalidadQ d
)d e
{ 	
return 
await 
_context !
.! "
	Empleados" +
. 
Where 
( 
e 
=> 
e 
. 
EmpId #
==$ &

empleadoId' 1
)1 2
. 

SelectMany 
( 
e 
=>  
e! "
." #
Perfil# )
.) *
Permisos* 2
)2 3
. 
AnyAsync 
( 
p 
=> 
p  
.  !
Funcionalidad! .
.. /
Codigo/ 5
==6 8
codigoFuncionalidad9 L
&&M O
pP Q
.Q R
FuncionalidadR _
._ `
Activo` f
)f g
;g h
} 	
} 
} Õ
ëC:\Users\sawad\Downloads\repositorios_gitlab_dicrep\api_remates_fase1\DICREP.EcommerceSubastas.Infrastructure\Authorization\PermisoRequirement.cs
	namespace 	
DICREP
 
. 
EcommerceSubastas "
." #
Infrastructure# 1
.1 2
Authorization2 ?
{		 
public 

class 
PermisoRequirement #
:$ %%
IAuthorizationRequirement& ?
{ 
public 
string 
Codigo 
{ 
get "
;" #
}$ %
public 
PermisoRequirement !
(! "
string" (
codigo) /
)/ 0
{ 	
Codigo 
= 
codigo 
; 
} 	
} 
} ≠
îC:\Users\sawad\Downloads\repositorios_gitlab_dicrep\api_remates_fase1\DICREP.EcommerceSubastas.Infrastructure\Authorization\PermisoPolicyPRovider.cs
	namespace		 	
DICREP		
 
.		 
EcommerceSubastas		 "
.		" #
Infrastructure		# 1
.		1 2
Authorization		2 ?
{

 
public 

class !
PermisoPolicyProvider &
:' ((
IAuthorizationPolicyProvider) E
{ 
const 
string 
PREFIX 
= 
$str (
;( )
private 
readonly .
"DefaultAuthorizationPolicyProvider ;#
_fallbackPolicyProvider< S
;S T
private 
readonly 
IServiceProvider )
_serviceProvider* :
;: ;
public !
PermisoPolicyProvider $
($ %
IOptions% -
<- . 
AuthorizationOptions. B
>B C
optionsD K
,K L
IServiceProviderM ]
serviceProvider^ m
)m n
{ 	#
_fallbackPolicyProvider #
=$ %
new& ).
"DefaultAuthorizationPolicyProvider* L
(L M
optionsM T
)T U
;U V
_serviceProvider 
= 
serviceProvider .
;. /
} 	
public 
Task 
< 
AuthorizationPolicy '
>' (!
GetDefaultPolicyAsync) >
(> ?
)? @
=>A C#
_fallbackPolicyProviderD [
.[ \!
GetDefaultPolicyAsync\ q
(q r
)r s
;s t
public 
Task 
< 
AuthorizationPolicy '
?' (
>( )"
GetFallbackPolicyAsync* @
(@ A
)A B
=>C E#
_fallbackPolicyProviderF ]
.] ^"
GetFallbackPolicyAsync^ t
(t u
)u v
;v w
public 
async 
Task 
< 
AuthorizationPolicy -
?- .
>. /
GetPolicyAsync0 >
(> ?
string? E

policyNameF P
)P Q
{ 	
if 
( 

policyName 
. 

StartsWith %
(% &
PREFIX& ,
), -
)- .
{   
var!! 
codigo!! 
=!! 

policyName!! '
.!!' (
	Substring!!( 1
(!!1 2
PREFIX!!2 8
.!!8 9
Length!!9 ?
)!!? @
;!!@ A
var## 
policy## 
=## 
new##  &
AuthorizationPolicyBuilder##! ;
(##; <
)##< =
.$$ 
AddRequirements$$ $
($$$ %
new$$% (
PermisoRequirement$$) ;
($$; <
codigo$$< B
)$$B C
)$$C D
.%% 
Build%% 
(%% 
)%% 
;%% 
return'' 
await'' 
Task'' !
.''! "

FromResult''" ,
('', -
policy''- 3
)''3 4
;''4 5
}(( 
return** 
await** #
_fallbackPolicyProvider** 0
.**0 1
GetPolicyAsync**1 ?
(**? @

policyName**@ J
)**J K
;**K L
}++ 	
},, 
}.. À
çC:\Users\sawad\Downloads\repositorios_gitlab_dicrep\api_remates_fase1\DICREP.EcommerceSubastas.Infrastructure\Authorization\PermisoHandler.cs
	namespace

 	
DICREP


 
.

 
EcommerceSubastas

 "
.

" #
Infrastructure

# 1
.

1 2
Authorization

2 ?
{ 
public 

class 
PermisoHandler 
:  ! 
AuthorizationHandler" 6
<6 7
PermisoRequirement7 I
>I J
{ 
private 
readonly 
IPermisoService (
_permisoService) 8
;8 9
public 
PermisoHandler 
( 
IPermisoService -
permisoService. <
)< =
{ 	
_permisoService 
= 
permisoService ,
;, -
} 	
	protected 
override 
async  
Task! %"
HandleRequirementAsync& <
(< ='
AuthorizationHandlerContext= X
contextY `
,` a
PermisoRequirementb t
requirement	u Ä
)
Ä Å
{ 	
var 
empleadoIdStr 
= 
context  '
.' (
User( ,
., -
	FindFirst- 6
(6 7
$str7 C
)C D
?D E
.E F
ValueF K
;K L
if 
( 
empleadoIdStr 
==  
null! %
)% &
return 
; 
var 

empleadoId 
= 
int  
.  !
Parse! &
(& '
empleadoIdStr' 4
)4 5
;5 6
if 
( 
await 
_permisoService %
.% &%
EmpleadoTienePermisoAsync& ?
(? @

empleadoId@ J
,J K
requirementL W
.W X
CodigoX ^
)^ _
)_ `
{   
context!! 
.!! 
Succeed!! 
(!!  
requirement!!  +
)!!+ ,
;!!, -
}"" 
}## 	
}$$ 
}&& Ø
èC:\Users\sawad\Downloads\repositorios_gitlab_dicrep\api_remates_fase1\DICREP.EcommerceSubastas.Infrastructure\Authorization\PermisoAttribute.cs
	namespace 	
DICREP
 
. 
EcommerceSubastas "
." #
Infrastructure# 1
.1 2
Authorization2 ?
{ 
public 

class 
PermisoAttribute !
:" #
AuthorizeAttribute$ 6
{ 
public 
PermisoAttribute 
(  
string  &
codigoFuncionalidad' :
): ;
{ 	
Policy 
= 
$" 
$str 
{  
codigoFuncionalidad  3
}3 4
"4 5
;5 6
} 	
} 
} 